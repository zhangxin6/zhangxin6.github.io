<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="KCFåœ¨DSPä¸Šçš„æ•æ·å®è·µ"><meta name="keywords" content="kcf"><meta name="author" content="Zhang Xin,undefined"><meta name="copyright" content="Zhang Xin"><title>KCFåœ¨DSPä¸Šçš„æ•æ·å®è·µ | null</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/gh/upupming/gitalk@36368e5dffd049e956cdbbd751ff96c28d8255cf/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#æ¦‚è¦"><span class="toc-number">1.</span> <span class="toc-text"> æ¦‚è¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼€å‘"><span class="toc-number">2.</span> <span class="toc-text"> å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#step-1-matlab-coder"><span class="toc-number">2.1.</span> <span class="toc-text"> Step 1 Matlab Coder</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#matlab-coder-å­˜åœ¨çš„é—®é¢˜"><span class="toc-number">2.1.1.</span> <span class="toc-text"> Matlab Coder å­˜åœ¨çš„é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#step-2-æ¨¡å—åŒ–"><span class="toc-number">2.2.</span> <span class="toc-text"> Step 2 æ¨¡å—åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ¨¡å—åŒ–ç»†èŠ‚"><span class="toc-number">2.2.1.</span> <span class="toc-text"> æ¨¡å—åŒ–ç»†èŠ‚</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#fftçš„å®ç°"><span class="toc-number">2.2.1.1.</span> <span class="toc-text"> FFTçš„å®ç°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#fft2çš„å®ç°"><span class="toc-number">2.2.1.2.</span> <span class="toc-text"> FFT2çš„å®ç°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#kcf-cå®ç°æ±‡æ€»"><span class="toc-number">2.2.1.3.</span> <span class="toc-text"> kcf Cå®ç°æ±‡æ€»</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æµ‹è¯•"><span class="toc-number">3.</span> <span class="toc-text"> æµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å•å…ƒæµ‹è¯•"><span class="toc-number">3.1.</span> <span class="toc-text"> å•å…ƒæµ‹è¯•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#é•œåƒæµ‹è¯•"><span class="toc-number">3.2.</span> <span class="toc-text"> é•œåƒæµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åç»­æ–¹å‘"><span class="toc-number">4.</span> <span class="toc-text"> åç»­æ–¹å‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">5.</span> <span class="toc-text"> æ€»ç»“</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Zhang Xin</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">3</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">2</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">2</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://zhangxin-1258487717.cos.ap-beijing.myqcloud.com/thumb_upleft.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/"></a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">KCFåœ¨DSPä¸Šçš„æ•æ·å®è·µ</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-11</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/dsp/">dsp</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="æ¦‚è¦"><a class="markdownIt-Anchor" href="#æ¦‚è¦"></a> æ¦‚è¦</h2>
<ul>
<li>KCF (Kernelized Correlation Filters)æ˜¯ä¸€ç§åŸºäºæ¨¡æ¿çš„ç›®æ ‡è·Ÿè¸ªç®—æ³•. ä½ å¯ä»¥åœ¨<a href="http://www.robots.ox.ac.uk/~joao/" target="_blank" rel="noopener">KCFé¡¹ç›®ä¸»é¡µ</a>æ‰¾åˆ°è®ºæ–‡ä¸å¼€æºçš„ä»£ç å®ç°.</li>
<li>KCFçš„å®ç°å¤§è‡´æœ‰ä¸¤ç±» : ä¸€ç±»æ˜¯åŸºäºMatlabçš„, ä¸€ç±»æ˜¯åŸºäºOpenCVçš„Cæˆ–Pythonå®ç°. è¿™ä¸¤ç±»å­˜åœ¨çš„é—®é¢˜æ˜¯ä¾èµ–ä¸€äº›åŸºç¡€åº“åŠæ•°æ®ç±»å‹, å®é™…å·¥ç¨‹éœ€è¦æ— ä¾èµ–çš„Cè¯­è¨€å®ç°.</li>
<li>ç”±äºOpenCVåº“å¼‚å¸¸å¤æ‚, è¿™ç¯‡æ–‡ç« ä»‹ç»ä»Matlabåˆ°Cçš„æ•æ·å¼€å‘. å®ƒé‡‡ç”¨äº†Matlab Coderè¿›è¡Œå¿«é€Ÿå¼€å‘, æ€è·¯é€‚ç”¨äºä½†ä¸é™äºKCFç®—æ³•.</li>
<li>é‡‡ç”¨äº†é›†æˆæµ‹è¯•ã€å•å…ƒæµ‹è¯•ã€é•œåƒæµ‹è¯•æ¥å¿«é€Ÿå®šä½Bug.</li>
<li>è¿‡ç¨‹è‡ªä¸»åŸåˆ›. <strong>æš‚æ—¶ä¸æä¾›å¼€æºä»£ç .</strong></li>
</ul>
<h2 id="å¼€å‘"><a class="markdownIt-Anchor" href="#å¼€å‘"></a> å¼€å‘</h2>
<h3 id="step-1-matlab-coder"><a class="markdownIt-Anchor" href="#step-1-matlab-coder"></a> Step 1 Matlab Coder</h3>
<p>Matlab Coderçš„ç›®æ ‡æ˜¯å®Œæˆç”±Mæ–‡ä»¶åˆ°Cæ–‡ä»¶. è¿™ä¸ªåŠŸèƒ½éå¸¸å¼ºå¤§, å»ºè®®é‡‡ç”¨è¾ƒæ–°çš„Matlabç‰ˆæœ¬, è¿™é‡Œé‡‡ç”¨çš„æ˜¯2018a. Coderéœ€è¦å‡½æ•°çš„è¾“å…¥å®šä¹‰, å¯ä»¥é€šè¿‡ç¼–å†™ä¸€ä¸ªè°ƒç”¨æ­¤å‡½æ•°çš„å‡½æ•°, æ¥è‡ªåŠ¨è·å–å‡½æ•°è¾“å…¥æ•°æ®ç±»å‹.</p>
<p>å¦‚æœæœ‰å¾ˆå¤šä¸ªmæ–‡ä»¶, å»ºè®®å…¨éƒ¨å†™åˆ°ä¸€ä¸ªmæ–‡ä»¶ä¸­,å†è¿›è¡Œè½¬æ¢.</p>
<p>å®¹æ˜“å‡ºç°çš„é—®é¢˜:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">im = rgb2gray(im);</span><br></pre></td></tr></table></figure>
<p>è¿™ç§è¾“å…¥imæ˜¯(width * height *3), è¾“å‡ºimæ˜¯(width * height)çš„, Cè¯­è¨€æ— æ³•å®ç°.</p>
<p>å¯ä»¥å†™æˆä¸¤ä¸ªå˜é‡å°±å¥½:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">im = <span class="built_in">zeros</span>(width,height,<span class="number">3</span>);</span><br><span class="line">im1 = <span class="built_in">zeros</span>(width,height);</span><br><span class="line">im1 = rgb2gray(im);</span><br></pre></td></tr></table></figure>
<p>å¦å¤–æ¡ä»¶å®šä¹‰,ä¹Ÿæ— æ³•å®ç°:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(width&gt;<span class="number">100</span>)</span><br><span class="line">  im = <span class="built_in">ones</span>(width,height);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æƒ…å†µ,åœ¨å¼€å¤´å¤„å…ˆè¿›è¡Œåˆå§‹åŒ–å³å¯:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">im = <span class="built_in">zeros</span>(width,height);</span><br><span class="line"><span class="keyword">if</span>(width&gt;<span class="number">100</span>)</span><br><span class="line">  im = <span class="built_in">ones</span>(width,height);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä»–ä¸€äº›æƒ…å†µ,è¯·å‚ç…§Matlab Coderçš„é”™è¯¯æç¤º.</p>
<h4 id="matlab-coder-å­˜åœ¨çš„é—®é¢˜"><a class="markdownIt-Anchor" href="#matlab-coder-å­˜åœ¨çš„é—®é¢˜"></a> Matlab Coder å­˜åœ¨çš„é—®é¢˜</h4>
<p>æœ‰äº›åŒå­¦å¯èƒ½ä¼šæƒ³, ç”¨è¿™ä¸ªCoderä¸€è½¬, æ‰€æœ‰å·¥ä½œå°±å®Œæˆäº†. ç„¶åå°±å¯ä»¥å»ğŸ˜„å•¦~</p>
<p>ä½†æ˜¯,æ€»æœ‰ä¸ªä½†æ˜¯. Matlab Coderè½¬æ¢å‡ºæ¥çš„ä»£ç è™½æ­£ç¡®ï¼Œä½†æ˜¯å­˜åœ¨è¿™æ ·å‡ ä¸ªé—®é¢˜:</p>
<ul>
<li>ä»£ç å†—é•¿,ç»å¸¸æœ‰ä¸¤å¤§é•¿æ®µä»£ç , å·®å¼‚å¾ˆå°, ä½†æ˜¯å®ƒæ²¡æœ‰æå–å…±åŒé¡¹.</li>
<li>ä»£ç åªå®ç°æ­¤æ¬¡è¾“å…¥ä¼šè¿è¡Œåˆ°çš„åˆ†æ”¯, å…¶ä»–åˆ†æ”¯å…¨éƒ¨åˆ é™¤.</li>
<li>ä»£ç ä¼šæœ‰éå¸¸é•¿çš„æ•°ç»„, ä¸ä»£ç äº¤ç»‡åœ¨ä¸€èµ·.</li>
</ul>
<p>æ€»ç»“æ¥è¯´, å°±æ˜¯å¯è¯»æ€§å·®ã€å¯æ”¹æ€§å·®. å¦‚æœæ”¹ä¸€ç»„å‚æ•°ä½œä¸ºè¾“å…¥, ä»£ç å¤§é‡éƒ¨åˆ†éœ€è¦ä¿®æ”¹.</p>
<p>å³ä»£ç ä¸è¾“å…¥çš„è€¦åˆæ€§å¤ªé«˜. ä»£ç æ¨¡å—åŒ–æ··ä¹±. è¿™æ ·çš„ä»£ç é¢å¯¹æ”¹å˜, æ˜¯æå…¶è„†å¼±çš„.</p>
<h3 id="step-2-æ¨¡å—åŒ–"><a class="markdownIt-Anchor" href="#step-2-æ¨¡å—åŒ–"></a> Step 2 æ¨¡å—åŒ–</h3>
<p>é‡æ„æ˜¯é—¨è‰ºæœ¯. ç›¸å¯¹æ¥è®², æœ¬é¡¹ç›®çš„å¤æ‚åº¦ä¸ç®—å¤ªé«˜ ( Cè¯­è¨€1000è¡Œä»¥å†… ), åœ¨é‡æ„ä¹‹å‰, æˆ‘ä»¬å¿…é¡»æœ‰é›†æˆæµ‹è¯•.æˆ‘ä»¬ä¸æ–­åœ°æ”¹,æ”¹å®Œå°±æŠŠä»£ç æ‰”è¿‡å»è¿›è¡Œé›†æˆæµ‹è¯•, ä»¥ç¡®ä¿æˆ‘ä»¬çš„ä»£ç è¿˜æ²¡æœ‰å˜è´¨.<br>
<img src="https://zhangxin-1258487717.cos.ap-beijing.myqcloud.com/1.jpg" alt="æµ‹è¯•åºåˆ—å›¾åƒ"></p>
<p>æˆ‘ä»¬é‡‡ç”¨votæ•°æ®åº“ä¸­çš„è¿™ç»„è§†é¢‘åºåˆ—ä½œä¸ºè¾“å…¥,è®°å½•åºåˆ—å¸§çš„ç›®æ ‡è·Ÿè¸ªä½ç½®. å°†ç›®æ ‡ä½ç½®çœŸå€¼ã€MATLABè®¡ç®—ç»“æœã€Cè®¡ç®—ç»“æœ, ç»˜åˆ¶æˆå›¾å¯¹æ¯”, ç›¸å·®ä¸æ˜¯å¤ªå¤šçš„è¯, å°±æ„å‘³ç€Cç‰ˆå®ç°ä»ç„¶å·¥ä½œç€.</p>
<p>å¯¹äºé›†æˆæµ‹è¯•, ä¸€å®šè¦è‡ªåŠ¨åŒ–. è¦ç®€åŒ–åˆ°æŒ‰ä¸€æ¬¡é¼ æ ‡, æˆ–æ•²å‡ æ¬¡é”®ç›˜å°±å¯åå°è¿è¡Œæµ‹è¯•. è€Œæµ‹è¯•ç»“æœæ˜¯å½“å‰æ—¶é—´ä¸ºåå­—çš„å›¾ç‰‡.æˆ‘ä»¬ç”¨shellè„šæœ¬å®Œæˆè¿™ä¸ªæµ‹è¯•.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">rm ../Debug/*</span><br><span class="line">rm ../output/res.txt</span><br><span class="line">rm test.sh</span><br><span class="line"></span><br><span class="line">frame_begin=1;</span><br><span class="line">frame_num=700;</span><br><span class="line"></span><br><span class="line">matlab -nodisplay -r "gen_line;quit"</span><br><span class="line">sh test.sh</span><br><span class="line">chmod 777 ../Debug/kcfs</span><br><span class="line">./../Debug/kcfs $frame_begin $frame_num</span><br><span class="line"></span><br><span class="line">cd ../auto_test</span><br><span class="line">cd /home/z/github_repo/KCF_detail/matlab_implementation</span><br><span class="line">matlab -nodisplay -r "run_a($frame_begin,$frame_num);quit"</span><br><span class="line"></span><br><span class="line">mv pos.txt /home/z/Desktop/c/myfft/myfft/kcfs/output</span><br><span class="line">cd /home/z/Desktop/c/myfft/myfft/kcfs/auto_test</span><br><span class="line">matlab -nodisplay -r "add_rect($frame_begin,$frame_num);quit"</span><br></pre></td></tr></table></figure>
<p>frame_begin, frame_numæ˜¯å‡½æ•°çš„è¾“å…¥å‚æ•°, å³ä»ç¬¬å‡ å¸§å¼€å§‹ä¸æ€»å…±å¤šå°‘å¸§.</p>
<p>ç¬¬ä¸‰æ®µè°ƒç”¨gen_lineè„šæœ¬, ç”Ÿæˆgccæ§åˆ¶å‚æ•°,ä¹‹åè¿è¡ŒCå®ç°.</p>
<p>ç¬¬å››æ®µè°ƒç”¨run_aè„šæœ¬,è¿è¡ŒMatlabå®ç°.</p>
<p>ç¬¬äº”æ®µå¯¹è·Ÿè¸ªç»“æœè¿›è¡Œå¤„ç†,  å åŠ çŸ©å½¢æ¡†è¿›è¡Œè§‚å¯ŸåŠè·Ÿè¸ªç»“æœå¯¹æ¯”å›¾ç»˜åˆ¶å¹¶ä¿å­˜.</p>
<p><img src="https://zhangxin-1258487717.cos.ap-beijing.myqcloud.com/%E5%AF%B9%E6%AF%94%E7%BB%93%E6%9E%9C_1612.png" alt="é›†æˆæµ‹è¯•å¯¹æ¯”ç»“æœ"></p>
<h4 id="æ¨¡å—åŒ–ç»†èŠ‚"><a class="markdownIt-Anchor" href="#æ¨¡å—åŒ–ç»†èŠ‚"></a> æ¨¡å—åŒ–ç»†èŠ‚</h4>
<p>éœ€è¦ä¸€ä¸ªå¤æ•°çš„æ•°æ®ç»“æ„ï¼Œè‡ªå·±å®ç°ï¼Œä¸è¦ç”¨å¾ˆå¤§çš„ç³»ç»Ÿå¤´æ–‡ä»¶ï¼</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">double</span> re;</span><br><span class="line">  <span class="keyword">double</span> im;</span><br><span class="line">&#125;creal_T1;</span><br></pre></td></tr></table></figure>
<h5 id="fftçš„å®ç°"><a class="markdownIt-Anchor" href="#fftçš„å®ç°"></a> FFTçš„å®ç°</h5>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fft</span><span class="params">(creal_T1 <span class="built_in">vector</span>[],<span class="keyword">int</span> N)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> dig,k,n,m,i,j1,dist,idx,idx1,r;</span><br><span class="line">  creal_T1 coef,tmp,mul_res;</span><br><span class="line"></span><br><span class="line">  change(N,<span class="built_in">vector</span>);</span><br><span class="line">  dig = <span class="number">0</span>;</span><br><span class="line">  k = N;</span><br><span class="line">  <span class="keyword">while</span>(k &gt; <span class="number">1</span>)&#123;</span><br><span class="line">      dig = dig + <span class="number">1</span>;</span><br><span class="line">      k = k / <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  n = N / <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">for</span>(m=<span class="number">1</span>;m&lt;=dig;m++)</span><br><span class="line">  &#123;</span><br><span class="line">      dist = <span class="built_in">pow</span>(<span class="number">2</span>, (m - <span class="number">1</span>) );</span><br><span class="line">      idx = <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">for</span>(i = <span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        idx1 = idx;</span><br><span class="line">        <span class="keyword">for</span>(j1 = <span class="number">1</span>; j1 &lt;= (N / (<span class="number">2</span> * n)); j1++)&#123;</span><br><span class="line">            r = (idx - <span class="number">1</span>) * <span class="built_in">pow</span>(<span class="number">2</span>, (dig - m));</span><br><span class="line">            <span class="keyword">if</span>(N==<span class="number">256</span>)</span><br><span class="line">            &#123;</span><br><span class="line">              coef.re = cos_256[(r % N) / N];</span><br><span class="line">              coef.im = -sin_256[(r % N) / N];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(N==<span class="number">128</span>)</span><br><span class="line">            &#123;</span><br><span class="line">              coef.re = cos_128[(r % N) / N];</span><br><span class="line">              coef.im = -sin_128[(r % N) / N];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                coef.re = <span class="built_in">cos</span>(<span class="number">2</span> * M_PI * r / N);</span><br><span class="line">                coef.im = -<span class="built_in">sin</span>(<span class="number">2</span> * M_PI * r / N);</span><br><span class="line">            &#125;</span><br><span class="line">            coef.re = <span class="built_in">cos</span>(<span class="number">2</span> * M_PI * r / N);</span><br><span class="line">            coef.im = -<span class="built_in">sin</span>(<span class="number">2</span> * M_PI * r / N);</span><br><span class="line">            </span><br><span class="line">            tmp.re = <span class="built_in">vector</span>[idx<span class="number">-1</span>].re;</span><br><span class="line">            tmp.im  = <span class="built_in">vector</span>[idx<span class="number">-1</span>].im;</span><br><span class="line">            mul(<span class="built_in">vector</span>[idx + dist<span class="number">-1</span>], coef, &amp;mul_res);</span><br><span class="line">            add(tmp, mul_res, &amp;<span class="built_in">vector</span>[idx<span class="number">-1</span>]);</span><br><span class="line">            sub(tmp, mul_res, &amp;<span class="built_in">vector</span>[idx + dist<span class="number">-1</span>]);</span><br><span class="line">            idx = idx + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        idx = idx1 + <span class="number">2</span> * dist;</span><br><span class="line">    &#125;</span><br><span class="line">    n = n / <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè¦æ±‚ç‚¹æ•°å¿…é¡»æ˜¯ï¼’çš„æ•´æ•°æ¬¡å¹‚ï¼Œç›¸å½“äºæœç´¢èŒƒå›´å¯ä»¥å¼¹æ€§è°ƒæ•´ä¸€ä¸‹ï¼Matlabçš„FFTåœ¨éï¼’çš„æ•´æ•°æ¬¡å¹‚æ—¶ï¼Œè¿›è¡Œäº†DFTé¢„ç®—. è¿™é‡Œå’ŒMatlabä¸ä¸€è‡´ï¼ä¸ºäº†åŠ å¿«FFTçš„é€Ÿåº¦ï¼Œå¯ä»¥ä¼˜åŒ–æˆç”¨æŸ¥è¡¨æ³•å®ç°ï¼</p>
<h5 id="fft2çš„å®ç°"><a class="markdownIt-Anchor" href="#fft2çš„å®ç°"></a> FFT2çš„å®ç°</h5>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fft2</span><span class="params">(creal_T1 <span class="built_in">vector</span>[],creal_T1 vector1[],<span class="keyword">int</span> M,<span class="keyword">int</span> N)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   creal_T1 hang[N];</span><br><span class="line">   creal_T1 lie[M];</span><br><span class="line">   <span class="keyword">int</span> i,j;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=N;j++)&#123;</span><br><span class="line">     <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=M;i++)&#123;</span><br><span class="line">       lie[i<span class="number">-1</span>].re = <span class="built_in">vector</span>[ ((j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N) ].re;</span><br><span class="line">       lie[i<span class="number">-1</span>].im = <span class="built_in">vector</span>[ ((j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N) ].im;</span><br><span class="line">     &#125;</span><br><span class="line">     fft(lie,M);</span><br><span class="line">     <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=M;i++)&#123;</span><br><span class="line">       <span class="built_in">vector</span>[ ((j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N) ].re = lie[i<span class="number">-1</span>].re;</span><br><span class="line">       <span class="built_in">vector</span>[ ((j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N) ].im = lie[i<span class="number">-1</span>].im;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=M;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=N;j++)&#123;</span><br><span class="line">      hang[j<span class="number">-1</span>].re =<span class="built_in">vector</span>[ (j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N ].re;</span><br><span class="line">      hang[j<span class="number">-1</span>].im =<span class="built_in">vector</span>[ (j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N ].im;</span><br><span class="line">    &#125;</span><br><span class="line">    fft(hang,N);</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=N;j++)&#123;</span><br><span class="line">      <span class="built_in">vector</span>[ (j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N ].re = hang[j<span class="number">-1</span>].re;</span><br><span class="line">      <span class="built_in">vector</span>[ (j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N ].im  = hang[j<span class="number">-1</span>].im;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=M;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=N;j++)&#123;</span><br><span class="line">      vector1[ (j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N ].re = <span class="built_in">vector</span>[ (j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N ].re;</span><br><span class="line">      vector1[ (j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N ].im  = <span class="built_in">vector</span>[ (j<span class="number">-1</span>)+ (i<span class="number">-1</span>)*N ].im;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>äºŒç»´FFTå°±æ˜¯å°†å›¾åƒæŒ‰æ¯è¡Œè¿›è¡Œä¸€éFFTåï¼Œåœ¨æŒ‰æ¯åˆ—è¿›è¡Œä¸€éFFT.</p>
<h5 id="kcf-cå®ç°æ±‡æ€»"><a class="markdownIt-Anchor" href="#kcf-cå®ç°æ±‡æ€»"></a> kcf Cå®ç°æ±‡æ€»</h5>
<table>
  <tr>   
    <td colspan="2">æ–‡ä»¶åç§°</td>
    <td>è¡Œæ•°</td>
    <td>æè¿°</td>    
  </tr>
  <tr>
    <td rowspan="10">.c</td>
    <td>main.c</td>
    <td>261</td>
    <td>ä¸»ç¨‹åº</td>
  </tr>
  <tr>
  <td>circshift.c</td>
  <td>30</td>
  <td>å¾ªç¯ç§»ä½</td>
  </tr>
  <tr>
  <td>conj_f.c</td>
  <td>11</td>
  <td>å–å…±è½­</td>
  </tr>
  <tr>
  <td>data_input.c</td>
  <td>17</td>
  <td>æ•°æ®è¯»å…¥</td>
ã€€</tr>      
  <tr>
  <td>div_f.c</td>
  <td>16</td>
  <td>å¤æ•°çŸ©é˜µé™¤æ³•</td>
  </tr>    
  <tr>
  <td>exp.c</td>
  <td>25</td>
  <td>çŸ©é˜µeæŒ‡æ•°æ¬¡å¹‚è®¡ç®—</td>
  </tr>    
  <tr>
  <td>mul_f.c</td>
  <td>16</td>
  <td>çŸ©é˜µå¤æ•°ä¹˜æ³•</td>
  </tr>     
  <tr>
  <td>myfft.c</td>
  <td>215</td>
  <td>fftç›¸å…³</td>
  </tr>    
  <tr>
  <td>ndgrid.c</td>
  <td>18</td>
  <td>Nç»´ç½‘ç»œæ’å€¼</td>
  </tr>    
  <tr>
  <td>power.c</td>
  <td>9</td>
  <td>çŸ©é˜µå¹³æ–¹è®¡ç®—</td>
  </tr>
  <tr>
    <td rowspan="ï¼‘">.ï½ˆ</td>
    <td>p_def.h</td>
    <td>35</td>
    <td>å‚æ•°é¢„å®šä¹‰</td>
  </tr>
</table>
<h2 id="æµ‹è¯•"><a class="markdownIt-Anchor" href="#æµ‹è¯•"></a> æµ‹è¯•</h2>
<h3 id="å•å…ƒæµ‹è¯•"><a class="markdownIt-Anchor" href="#å•å…ƒæµ‹è¯•"></a> å•å…ƒæµ‹è¯•</h3>
<p>éšç€ä»£ç å¤æ‚åº¦çš„æå‡ï¼Œå¯¹äºbugå®šä½åŠä»£ç è´¨é‡ä¿è¯æå‡ºæŒ‘æˆ˜ï¼æ¨¡å—åŒ–çš„ä»£ç å°±æ˜¯ä¸€å±‚ä¸€å±‚æ­ç§¯æœ¨çš„è¿‡ç¨‹ï¼Œç¡®ä¿æ¯ä¸€å±‚å¯é ï¼Œéå¸¸å…³é”®ï¼<br>
å¯¹äºï¼£è¯­è¨€è€Œè¨€ï¼Œä¼ ç»Ÿçš„å•å…ƒæµ‹è¯•æ˜¯åœ¨ï¼£å¹³å°æ„å»ºæµ‹è¯•æ¿€åŠ±ï¼Œä¸é¢„æƒ³è¿›è¡Œæ¯”å¯¹ï¼è€ƒè™‘åˆ°ï¼£è¯­è¨€æ˜¯ä¸€ç§æŠ½è±¡å±‚æ¬¡è¾ƒä½çš„è¯­è¨€ï¼Œåœ¨ï¼£å¹³å°ä¸‹è¿›è¡Œæµ‹è¯•è´¹æ—¶ï¼ˆä»£ç å†™çš„æ…¢ï¼‰è´¹åŠ›ï¼ˆä»£ç å†™çš„é•¿ï¼‰ï¼<br>
è¿™é‡Œæ‰ç”¨Matlabå¹³å°è¿›è¡Œæµ‹è¯•ï¼Œè€Œï¼£è¯­è¨€çš„ä»£ç ï¼Œé€šè¿‡mexå‡½æ•°ï¼Œè½¬æ¢æˆï¼­ATLABå¯è¿è¡Œçš„mexw64ï¼ˆ64ä½æœºå™¨ä¸‹ï¼‰ï¼</p>
<p>æˆ‘ä»¬ä»¥c_expè¿™ä¸€å¤æ•°çŸ©é˜µæŒ‡æ•°æ¬¡å¹‚è®¡ç®—ä¸ºä¾‹ï¼Œï½ƒè¯­è¨€å‡½æ•°å¦‚ä¸‹ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">c_exp</span><span class="params">(creal_T1 x[box_p])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> k;</span><br><span class="line">  <span class="keyword">double</span> x_re;</span><br><span class="line">  <span class="keyword">double</span> r;</span><br><span class="line">  <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; box_p; k++) &#123;</span><br><span class="line">    r = <span class="built_in">exp</span>(x[k].re / <span class="number">2.0</span>);</span><br><span class="line">    x_re = r * (r * <span class="built_in">cos</span>(x[k].im));</span><br><span class="line">    r *= r * <span class="built_in">sin</span>(x[k].im);</span><br><span class="line">    x[k].re = x_re;</span><br><span class="line">    x[k].im = r;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹åº”ç¼–å†™çš„mexå‡½æ•°å¦‚ä¸‹</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mex.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"p_def.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">c_exp</span><span class="params">(creal_T1 x[box_p])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> k;</span><br><span class="line">  <span class="keyword">double</span> x_re;</span><br><span class="line">  <span class="keyword">double</span> r;</span><br><span class="line">  <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; box_p; k++) &#123;</span><br><span class="line">    r = <span class="built_in">exp</span>(x[k].re / <span class="number">2.0</span>);</span><br><span class="line">    x_re = r * (r * <span class="built_in">cos</span>(x[k].im));</span><br><span class="line">    r *= r * <span class="built_in">sin</span>(x[k].im);</span><br><span class="line">    x[k].re = x_re;</span><br><span class="line">    x[k].im = r;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mexFunction</span><span class="params">(<span class="keyword">int</span> nlhs,mxArray *plhs[],<span class="keyword">int</span> nrhs,<span class="keyword">const</span> mxArray *prhs[])</span></span>&#123;</span><br><span class="line">    creal_T1 *input1;</span><br><span class="line">    <span class="keyword">double</span>* input1_re;<span class="keyword">double</span>* input1_im;</span><br><span class="line">    <span class="keyword">double</span>* out_re;   <span class="keyword">double</span>* out_im;</span><br><span class="line">    <span class="keyword">int</span> RowA,ColA,i;</span><br><span class="line">    <span class="keyword">if</span>(nlhs != <span class="number">1</span>)&#123;</span><br><span class="line">       mexErrMsgTxt(<span class="string">"One output required."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(nrhs !=<span class="number">1</span>)&#123;</span><br><span class="line">        mexErrMsgTxt(<span class="string">"One input required."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    RowA = mxGetM(prhs[<span class="number">0</span>]);</span><br><span class="line">    ColA = mxGetN(prhs[<span class="number">0</span>]);</span><br><span class="line">    input1_re = mxGetPr(prhs[<span class="number">0</span>]);</span><br><span class="line">    input1_im = mxGetPi(prhs[<span class="number">0</span>]);</span><br><span class="line">    input1 = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(creal_T1)*RowA*ColA);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;RowA*ColA;i++)</span><br><span class="line">    &#123;</span><br><span class="line">      input1[i].re = input1_re[i];</span><br><span class="line">      input1[i].im = input1_im[i];</span><br><span class="line">    &#125;</span><br><span class="line">    plhs[<span class="number">0</span>] = mxCreateDoubleMatrix(RowA,ColA,mxCOMPLEX);</span><br><span class="line">    out_re = mxGetPr(plhs[<span class="number">0</span>]);</span><br><span class="line">    out_im = mxGetPi(plhs[<span class="number">0</span>]);</span><br><span class="line">    c_exp(input1);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;RowA*ColA;i++)</span><br><span class="line">    &#123;</span><br><span class="line">      out_re[i] = input1[i].re;</span><br><span class="line">      out_im[i] = input1[i].im;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(input1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šå¸¸çš„mexå‡½æ•°çš„å†™æ³•ï¼Œç½‘ä¸Šä»‹ç»çš„æ¯”è¾ƒå¤šï¼Œè¿™é‡Œåªé‡ç‚¹ä»‹ç»æ•°æ®ç±»å‹ä¸ºå¤æ•°çš„æƒ…å½¢ï¼</p>
<p>é€šè¿‡mxGetPrå’ŒmxGetPiåˆ†åˆ«è·å–è¾“å…¥çš„å®éƒ¨å’Œè™šéƒ¨ï¼ç”¨mxCreateDoubleMatrixåˆ›å»ºå¤æ•°çŸ©é˜µï¼</p>
<p>mexå‡½æ•°ä¸»è¦åªæ˜¯è¦å®Œæˆï¼£è¯­è¨€ä¸mè¯­è¨€è¾“å…¥è¾“å‡ºçš„è½¬æ¢å’Œç»‘å®šï¼Œåº”è¯¥è¯´æ˜¯æ¯”è¾ƒç®€å•çš„ï¼</p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å•å…ƒæµ‹è¯•çš„è¿‡ç¨‹ï¼šä¸»è¦ç”±atestä¸stestä¸¤éƒ¨åˆ†ç»„æˆï¼</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">clc; close all;clear all;</span><br><span class="line"></span><br><span class="line">p1 = mfilename(<span class="string">'fullpath'</span>);</span><br><span class="line"><span class="built_in">j</span>=findstr(p1,<span class="string">'/'</span>);</span><br><span class="line">p1=p1(<span class="number">1</span>:<span class="built_in">j</span>(<span class="keyword">end</span>));</span><br><span class="line">cd(p1);</span><br><span class="line">addpath(<span class="string">'../'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% testcase1  2*2</span></span><br><span class="line">input1 = <span class="built_in">zeros</span>(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">input1 = [<span class="number">1</span>+<span class="built_in">i</span>,<span class="number">2</span>-<span class="built_in">i</span>;<span class="number">3</span>+<span class="built_in">i</span>,<span class="number">4</span>-<span class="built_in">i</span>];</span><br><span class="line">stest_c_exp(input1,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% testcase2  256*128</span></span><br><span class="line">input1 = <span class="built_in">zeros</span>(<span class="number">256</span>,<span class="number">128</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="number">256</span></span><br><span class="line">  <span class="keyword">for</span> k=<span class="number">1</span>:<span class="number">128</span></span><br><span class="line">    input1(<span class="built_in">j</span>,k) = <span class="built_in">j</span>*<span class="number">0.1</span>+<span class="number">2</span><span class="built_in">i</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">stest_c_exp(input1,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">%testcase3  1024*1024</span></span><br><span class="line">input1 = <span class="built_in">zeros</span>(<span class="number">1024</span>,<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="number">1024</span></span><br><span class="line">  <span class="keyword">for</span> k=<span class="number">1</span>:<span class="number">1024</span></span><br><span class="line">    input1(<span class="built_in">j</span>,k) = <span class="built_in">j</span>*<span class="number">0.01</span>+<span class="number">3</span><span class="built_in">i</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">stest_c_exp(input1,<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>atestä¸»è¦å®Œæˆæµ‹è¯•ç”¨ä¾‹çš„ç”Ÿæˆï¼Œå¹¶è°ƒç”¨stestè¿›è¡Œæµ‹è¯•ï¼</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stest_c_exp</span><span class="params">(input1,seq)</span></span></span><br><span class="line"></span><br><span class="line">  fid = fopen([<span class="string">'c_exp_'</span> num2str(seq) <span class="string">'.txt'</span>],<span class="string">'r'</span>);</span><br><span class="line">  A = fscanf(fid,<span class="string">'%f,'</span>);</span><br><span class="line"></span><br><span class="line">  gt0                 = A(<span class="number">1</span>);</span><br><span class="line">  gt1                 = A(<span class="number">2</span>);</span><br><span class="line">  gt2                 = A(<span class="number">3</span>);</span><br><span class="line">  gt3                 = A(<span class="number">4</span>);</span><br><span class="line">  padding             = A(<span class="number">5</span>);</span><br><span class="line">  ifr                 = A(<span class="number">6</span>);</span><br><span class="line">  cell_size           = A(<span class="number">7</span>);</span><br><span class="line">  lambda              = A(<span class="number">8</span>);</span><br><span class="line">  sigma               = A(<span class="number">9</span>);</span><br><span class="line">  output_sigma_factor = A(<span class="number">10</span>);</span><br><span class="line">  im_w                = A(<span class="number">11</span>);</span><br><span class="line">  im_h                = A(<span class="number">12</span>);</span><br><span class="line">  box_w               = A(<span class="number">13</span>);</span><br><span class="line">  box_h               = A(<span class="number">14</span>);</span><br><span class="line">  box_p               = A(<span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(exist(<span class="string">'p_def.h'</span>))</span><br><span class="line">    delete(<span class="string">'p_def.h'</span>);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  create(<span class="string">'p_def.h'</span>, A);</span><br><span class="line">  delete(<span class="string">'mex_c_exp.mexa64'</span>);</span><br><span class="line">  mex(<span class="string">'mex_c_exp.c'</span>);</span><br><span class="line"></span><br><span class="line">  output1 = <span class="built_in">exp</span>(input1);</span><br><span class="line">  output2 = mex_c_exp(input1);</span><br><span class="line"></span><br><span class="line">  res = compare(output1,output2);</span><br><span class="line"></span><br><span class="line">  fprintf(<span class="string">'%s'</span>,<span class="string">"c_exp's testcase "</span>);</span><br><span class="line">  fprintf(<span class="string">'%d'</span>,uint8(seq));</span><br><span class="line">  <span class="keyword">if</span>(res == <span class="number">1</span>)</span><br><span class="line">    fprintf(<span class="string">'%s\n'</span>,<span class="string">" success"</span>);</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    fprintf(<span class="string">'%s\n'</span>,<span class="string">" fail"</span>);</span><br><span class="line">  <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>stestå®ŒæˆæŸç»„å‚æ•°ä¸‹çš„ï¼£å®ç°åŠï¼­atlabå®ç°å¯¹æ¯”ï¼å¦‚æœè¯¯å·®è¶³å¤Ÿå°ï¼Œæ‰“å°success.å¦åˆ™æ‰“å° fail.</p>
<h3 id="é•œåƒæµ‹è¯•"><a class="markdownIt-Anchor" href="#é•œåƒæµ‹è¯•"></a> é•œåƒæµ‹è¯•</h3>
<p>åœ¨è¿›è¡Œå®Œæ‰€æœ‰çš„å•å…ƒæµ‹è¯•ï¼Œå‡é€šè¿‡çš„å‰æä¸‹ï¼Œç¨‹åºè¿˜æ˜¯ä¸æ­£ç¡®ï¼ˆé›†æˆæµ‹è¯•æ— æ³•é€šè¿‡ï¼‰ï¼é‚£å°±è¦é å¼ºå¤§çš„é•œåƒæµ‹è¯•ï¼ˆåå­—è‡ªå®šä¹‰çš„ï¼‰ï¼æ‰€è°“é•œåƒæµ‹è¯•ï¼Œå°±æ˜¯è·‘ä¸€æ­¥m, è·‘ä¸€æ­¥ï¼£ï¼Œç„¶åå¯¹æ¯”ç»“æœï¼mainçš„æ¯ä¸€è¡Œéƒ½è¿›è¡Œå¯¹ç…§ï¼Œç›´åˆ°èƒ½å¤Ÿæ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼é•œåƒæµ‹è¯•çœ‹èµ·æ¥æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pos1= [gt1 + <span class="built_in">floor</span>(gt3/<span class="number">2</span>)  gt0 + <span class="built_in">floor</span>(gt2/<span class="number">2</span>)];</span><br><span class="line">pos2= [gt1 + <span class="built_in">floor</span>(gt3/<span class="number">2</span>)  gt0 + <span class="built_in">floor</span>(gt2/<span class="number">2</span>)];</span><br><span class="line"></span><br><span class="line">output_sigma = <span class="built_in">sqrt</span>(gt2*gt3) * output_sigma_factor / cell_size;</span><br><span class="line"></span><br><span class="line">labels1 = gaussian_shaped_labels(output_sigma, <span class="built_in">ceil</span>(window_sz / cell_size));</span><br><span class="line">labels2 = mex_gaussian_shaped_labels(gauss);</span><br><span class="line">step_i = <span class="number">1</span>;</span><br><span class="line">res = compare(labels1,labels2);</span><br><span class="line"><span class="keyword">if</span>(res == <span class="number">1</span>)</span><br><span class="line">  fprintf(<span class="string">'%s %d %s\n'</span>,<span class="string">"step"</span>,step_i,<span class="string">"success"</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  fprintf(<span class="string">'%s %d %s\n'</span>,<span class="string">"step"</span>,step_i,<span class="string">"fail"</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">step_i = step_i + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"> yf1 = fft2(labels1);</span><br><span class="line"> yf2 = mex_fft2_d(labels2,box_w,box_h);</span><br><span class="line"> res = compare(yf1,yf2);</span><br><span class="line"> <span class="keyword">if</span>(res == <span class="number">1</span>)</span><br><span class="line">   fprintf(<span class="string">'%s %d %s\n'</span>,<span class="string">"step"</span>,step_i,<span class="string">"success"</span>);</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">   fprintf(<span class="string">'%s %d %s\n'</span>,<span class="string">"step"</span>,step_i,<span class="string">"fail"</span>);</span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line"> step_i = step_i + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h2 id="åç»­æ–¹å‘"><a class="markdownIt-Anchor" href="#åç»­æ–¹å‘"></a> åç»­æ–¹å‘</h2>
<ul>
<li>å®Œæˆå®Œæ•´çš„KCF (Hogç‰¹å¾)ï¼</li>
<li>ä¼˜åŒ–ï¼£ç‰ˆKCFçš„é€Ÿåº¦ï¼</li>
<li>åœ¨C6678ä¸Šè¿›è¡ŒçœŸå®æµ‹è¯•ï¼</li>
</ul>
<h2 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h2>
<p>è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº†KCFç”±ï¼­åˆ°ï¼£çš„å¼€å‘è¿‡ç¨‹ï¼é‡‡ç”¨äº†æµ‹è¯•ä¸å¼€å‘å¹¶é‡çš„æ•æ·å®è·µï¼æå‡ºçš„æ–¹æ³•å…·æœ‰æ™®é€‚æ€§ï¼šåŸºäºMatlab Coderçš„ä½¿ç”¨ï¼Œå®Œæˆäº†ï½è®¾è®¡å¼€å‘ï¼Œï¼£è¿è¡Œåº”ç”¨çš„è®¾æƒ³ï¼åœ¨å¼€å‘è€…çš„æ—¶é—´è¶Šæ¥è¶Šå®è´µçš„ä»Šå¤©ï¼Œè®©å¼€å‘è€…ä¸å†çº ç»“äºï¼£è¯­è¨€çš„disgustingçš„ç»†èŠ‚ï¼Œè€Œåˆèƒ½äº«å—åˆ°ï¼£è¯­è¨€çš„è·¨å¹³å°ã€é«˜é€Ÿåº¦ã€é€‚ç”¨äºåµŒå…¥å¼çš„ä¼˜ç‚¹ï¼</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Zhang Xin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://zhangxin6.github.io/2019/08/11/KCFåœ¨DSPä¸Šçš„æ•æ·å®è·µ/">https://zhangxin6.github.io/2019/08/11/KCFåœ¨DSPä¸Šçš„æ•æ·å®è·µ/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/kcf/">kcf</a></div><div class="addthis_inline_share_toolbox pull-right"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5c388b5dc29b982b" async></script><nav id="pagination"><div class="next-post pull-right"><a href="/2019/01/20/connected_regions_labelingï¼ˆè¿é€šåŸŸæå–ï¼‰/"><span>è¿é€šåŸŸæå–çš„FPGAè®¾è®¡</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '34079ee84460781a4f66',
  clientSecret: 'e1ffce31e6c705ae1a77bfbfbebb548bac1b57d1',
  repo: 'zhangxin6.github.io',
  owner: 'zhangxin6',
  admin: 'zhangxin6',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2019 By Zhang Xin</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script></body></html>